<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>APUSH Unit 5 Clicker</title>
  <style>
    :root {
      --bg: #0b1220;
      --card: #111a2e;
      --muted: #a9b5d9;
      --text: #eef1fb;
      --accent: #7aa2ff;
      --accent-2: #66e3c4;
      --danger: #ff7a7a;
      --gold: #ffd166;
      --shadow: 0 10px 30px rgba(0, 0, 0, .35);
      --radius: 18px;
      --target-size: 56px;
      --target-pad: 10px;
      --move-ms: 260ms;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: radial-gradient(1000px 600px at 15% 10%, #0f1830 0%, var(--bg) 50%),
                  radial-gradient(800px 500px at 85% 20%, #0c1a33 0%, var(--bg) 50%);
      color: var(--text);
      font: 16px/1.4 system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Arial;
    }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 24px; }
    header { display: flex; justify-content: space-between; align-items: center; gap: 16px; margin-bottom: 16px; }
    h1 { font-size: 28px; margin: 0; }
    .subtitle { color: var(--muted); font-size: 13px; }

    .grid { display: grid; grid-template-columns: 1.4fr .9fr .7fr; gap: 16px; }
    @media (max-width: 920px) { .grid { grid-template-columns: 1fr; } }

    .card {
      background: linear-gradient(180deg, rgba(255, 255, 255, .02), rgba(255, 255, 255, 0));
      border: 1px solid rgba(255, 255, 255, .06);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .card .head { display: flex; align-items: center; justify-content: space-between; padding: 14px 16px; border-bottom: 1px solid rgba(255,255,255,.06); }
    .card .body { padding: 16px; }

    /* Click Area */
    .click-area {
      position: relative;
      width: 100%;
      aspect-ratio: 1/1;
      border-radius: 24px;
      background:
        radial-gradient(200px 200px at 30% 25%, rgba(255, 255, 255, .12), rgba(255, 255, 255, 0) 60%),
        linear-gradient(180deg, #1a2a53, #121d3a);
      box-shadow: 0 20px 60px rgba(0, 0, 0, .5), inset 0 0 0 2px rgba(255, 255, 255, .06);
      overflow: hidden;
    }

    /* Moving Target */
    .target {
      position: absolute;
      width: var(--target-size);
      height: var(--target-size);
      border-radius: 50%;
      background:
        radial-gradient(140% 140% at 30% 25%,
          rgba(255, 255, 255, .35) 0%,
          rgba(255, 255, 255, .16) 36%,
          rgba(255, 255, 255, .08) 58%,
          rgba(255, 255, 255, 0) 78%
        ),
        linear-gradient(180deg, #7aa2ff, #4f7ef0);
      background-clip: padding-box;
      color: #0b1124;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      cursor: pointer;
      user-select: none;
      transition: left var(--move-ms) cubic-bezier(.2,.8,.2,1),
                  top var(--move-ms) cubic-bezier(.2,.8,.2,1),
                  transform .06s ease, filter .15s ease;
      box-shadow: 0 10px 28px rgba(0, 0, 0, .45), inset 0 0 0 2px rgba(255, 255, 255, .22);
    }
    .target:hover { filter: brightness(1.08); }
    .target:active { transform: scale(.97); }

    .row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
    .pill { display: inline-flex; align-items: center; gap: 8px; border: 1px solid rgba(255,255,255,.1); padding: 8px 10px; border-radius: 999px; background: rgba(255,255,255,.03); font-size: 13px; color: var(--muted); }
    .pill strong { color: var(--text); }

    .btn { border: none; border-radius: 12px; padding: 10px 12px; font-weight: 700; cursor: pointer; transition: filter .15s, transform .06s; }
    .btn:hover { filter: brightness(1.08); }
    .btn:active { transform: translateY(1px); }
    .btn.gold { background: linear-gradient(180deg, #f7d36f, #d8aa39); color: #281a00; }
    .btn.accent { background: linear-gradient(180deg, #7aa2ff, #4f7ef0); color: #0c1330; }
    .btn.alt { background: linear-gradient(180deg, #66e3c4, #35c2a2); color: #06241b; }

    .list { display: flex; flex-direction: column; gap: 10px; }
    .item { display: flex; gap: 12px; align-items: center; justify-content: space-between; padding: 12px; border-radius: 14px; background: rgba(255,255,255,.03); border: 1px solid rgba(255,255,255,.06); }
    .item .meta { display: flex; flex-direction: column; gap: 2px; }
    .item .title { font-weight: 700; }
    .item .note { font-size: 12px; color: var(--muted); }

    .meter { height: 10px; width: 100%; background: rgba(255,255,255,.06); border-radius: 999px; overflow: hidden; }
    .meter > div { height: 100%; width: 0%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); }

    .money { font-size: 24px; font-weight: 900; }

    /* Dialogs */
    dialog { border: none; border-radius: 18px; width: min(560px, 92%); background: var(--card); color: var(--text); box-shadow: var(--shadow); }
    dialog::backdrop { background: rgba(5,10,20,.6); }
    .modal-head { padding: 14px 16px; border-bottom: 1px solid rgba(255,255,255,.06); display: flex; justify-content: space-between; align-items: center; }
    .modal-body { padding: 16px; }

    /* Choices - improved visibility */
    .choices { display: grid; gap: 10px; margin-top: 10px; }
    .choice {
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.18);
      padding: 10px 12px;
      border-radius: 12px;
      cursor: pointer;
      color: var(--text);
      transition: background .15s ease, border-color .15s ease, transform .05s ease;
    }
    .choice:hover {
      background: rgba(255,255,255,.12);
      border-color: rgba(255,255,255,.28);
      transform: translateY(-1px);
    }
    .choice.correct {
      border-color: var(--accent-2);
      background: rgba(102,227,196,.15);
    }
    .choice.wrong {
      border-color: var(--danger);
      background: rgba(255,122,122,.12);
    }

    .small { font-size: 12px; color: var(--muted); }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>APUSH Unit 5 Clicker</h1>
        <div class="subtitle">Earn <strong>USD</strong> by clicking, buying upgrades, and answering Unit 5 questions (1844‚Äì1877).</div>
      </div>
      <div class="row">
        <button id="saveBtn" class="btn alt">üíæ Save</button>
        <button id="prestigeBtn" class="btn gold">üåÄ Prestige</button>
      </div>
    </header>

    <div class="grid">
      <section class="card">
        <div class="head">
          <div class="row">
            <div>
              <div id="currency" class="money">$0</div>
              <div class="subtitle">Dollars</div>
            </div>
            <div class="pill"><span>üñ±Ô∏è $/Click:</span><strong id="ppc">1</strong></div>
            <div class="pill"><span>‚è±Ô∏è $/s:</span><strong id="pps">0</strong></div>
            <div class="pill"><span>‚ö° Mult:</span><strong id="mult">1√ó</strong></div>
            <div class="pill"><span>‚ú® Prestige:</span><strong id="prestige">0 (√ó1)</strong></div>
          </div>
        </div>
        <div class="body">
          <div id="clickArea" class="click-area">
            <button id="targetBtn" class="target">$</button>
          </div>
          <p class="small" style="margin-top:10px;">Click the moving target to earn money.</p>
          <div class="row" style="margin-top:10px;">
            <button id="boostBtn" class="btn gold">üéÅ Quiz Boost</button>
            <span id="boostTimer" class="pill">‚è≥ Boost: <strong>‚Äî</strong></span>
          </div>
          <div style="margin-top:10px;">
            <div class="meter"><div id="progressBar"></div></div>
            <div class="small muted" id="nextGoal">Goal: Reach $100,000,000</div>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="head"><strong>Upgrades</strong></div>
        <div class="body"><div id="upgradeList" class="list"></div></div>
      </section>

      <section class="card">
        <div class="head"><strong>Producers</strong></div>
        <div class="body"><div id="producerList" class="list"></div></div>
      </section>
    </div>

    <footer class="small muted" style="margin-top:18px"></footer>
  </div>

  <dialog id="quizModal">
    <div class="modal-head"><strong>Answer a Unit 5 question</strong><button id="closeQuiz" class="btn">‚úñ</button></div>
    <div class="modal-body">
      <div class="small muted">Get the answer right to pick a reward.</div>
      <h3 id="qText"></h3>
      <div id="qChoices" class="choices"></div>
      <div class="footer" style="margin-top:10px; text-align:right;">
        <button id="rerollBtn" class="btn alt">üîÅ New Question</button>
      </div>
    </div>
  </dialog>

<script>
window.addEventListener('DOMContentLoaded', () => {
  const $  = s => document.querySelector(s);
  const $$ = s => document.querySelectorAll(s);

  /* ---------- STATE ---------- */
  const state = {
    points: 0,
    basePpc: 1,
    ppcMult: 1,
    pps: 0,
    goal: 100000000,
    prestige: 0,
    endless: false,
    upgrades: [],    // <-- needed
    producers: []    // <-- needed
  };

  /* ---------- DATA ---------- */
  const price = (base,n)=>Math.floor(base*Math.pow(1.55,n));
  const UPGRADE_DATA = [
    { id:'ppc', name:'PPC Upgrade', desc:'+1 $/Click', ppc:1, baseCost:50 }
  ];
  const PRODUCER_DATA = [
    { id:'pamphleteers', name:'Abolitionist Pamphleteers', basePps:0.05, baseCost:200 }
  ];

  /* ---------- DOM REFS ---------- */
  const moneyEl    = $('#currency');
  const ppcEl      = $('#ppc');
  const ppsEl      = $('#pps');
  const multEl     = $('#mult');
  const prestigeEl = $('#prestige');
  const progressEl = $('#progressBar');
  const nextGoalEl = $('#nextGoal');

  const upgradeList  = $('#upgradeList');
  const producerList = $('#producerList');

  const clickArea = $('#clickArea');
  const targetBtn = $('#targetBtn');

  const boostBtn   = $('#boostBtn');
  const quizModal  = $('#quizModal');
  const qText      = $('#qText');
  const qChoices   = $('#qChoices');
  const closeQuiz  = $('#closeQuiz');
  const reroll     = $('#rerollBtn');

  /* ---------- INIT CONTENT ---------- */
  function initContent(){
    if(!state.upgrades.length){
      state.upgrades = UPGRADE_DATA.map(u => ({...u, level:0}));
    }
    if(!state.producers.length){
      state.producers = PRODUCER_DATA.map(p => ({...p, level:0}));
    }
  }

  /* ---------- FORMAT / HUD ---------- */
  function fmt(n){
    if(n>=1e9) return '$'+(n/1e9).toFixed(2)+'B';
    if(n>=1e6) return '$'+(n/1e6).toFixed(2)+'M';
    if(n>=1e3) return '$'+(n/1e3).toFixed(2)+'k';
    return '$'+Math.floor(n);
  }

  function updateHUD(){
    moneyEl.textContent = fmt(state.points);
    ppcEl.textContent = fmt(state.basePpc * state.ppcMult);
    ppsEl.textContent = '$' + state.pps.toFixed(2);
    multEl.textContent = state.ppcMult.toFixed(1)+'√ó';
    prestigeEl.textContent = `${state.prestige} (√ó${state.prestige+1})`;
    const prog = Math.max(0, Math.min(1, state.points / state.goal));
    progressEl.style.width = (prog*100).toFixed(1) + '%';
    nextGoalEl.textContent = state.endless
      ? 'Endless mode unlocked! Keep going. Prestige for +1√ó permanent boost.'
      : `Goal: Reach ${fmt(state.goal)}`;
  }

  /* ---------- RENDER: UPGRADES ---------- */
  function renderUpgrades(){
    upgradeList.innerHTML = '';
    state.upgrades.forEach(u=>{
      const n = u.level;
      const cost = price(u.baseCost, n);
      const item = document.createElement('div');
      item.className = 'item';
      item.innerHTML = `
        <div class="meta">
          <div class="title">${u.name}</div>
          <div class="note">${u.desc} ‚Ä¢ Owned: ${n} ‚Ä¢ Cost: ${fmt(cost)}</div>
        </div>`;
      const btn = document.createElement('button');
      btn.className = 'btn accent';
      btn.textContent = 'Buy';
      btn.disabled = state.points < cost;
      btn.addEventListener('click', ()=>{
        if(state.points < cost) return;
        state.points -= cost;
        u.level++;
        state.basePpc += u.ppc;
        updateHUD();
        renderUpgrades();
      });
      item.appendChild(btn);
      upgradeList.appendChild(item);
    });
  }

  /* ---------- RENDER: PRODUCERS ---------- */
  function recomputePPS(){
    let total = 0;
    state.producers.forEach(p=> total += p.basePps * p.level);
    state.pps = total;
  }

  function renderProducers(){
    producerList.innerHTML = '';
    state.producers.forEach(p=>{
      const n = p.level;
      const cost = price(p.baseCost, n);
      const item = document.createElement('div');
      item.className = 'item';
      item.innerHTML = `
        <div class="meta">
          <div class="title">${p.name}</div>
          <div class="note">+${p.basePps.toFixed(2)} $/s each ‚Ä¢ Owned: ${n} ‚Ä¢ Cost: ${fmt(cost)}</div>
        </div>`;
      const btn = document.createElement('button');
      btn.className = 'btn';
      btn.textContent = 'Hire';
      btn.disabled = state.points < cost;
      btn.addEventListener('click', ()=>{
        if(state.points < cost) return;
        state.points -= cost;
        p.level++;
        recomputePPS();
        updateHUD();
        renderProducers();
      });
      item.appendChild(btn);
      producerList.appendChild(item);
    });
  }

  /* ---------- AFFORDABILITY REFRESH ---------- */
  function refreshAffordability(){
    $$('#upgradeList .item').forEach((el,i)=>{
      const u = state.upgrades[i];
      const cost = price(u.baseCost, u.level);
      el.querySelector('button').disabled = state.points < cost;
      el.querySelector('.note').textContent = `${u.desc} ‚Ä¢ Owned: ${u.level} ‚Ä¢ Cost: ${fmt(cost)}`;
    });
    $$('#producerList .item').forEach((el,i)=>{
      const p = state.producers[i];
      const cost = price(p.baseCost, p.level);
      el.querySelector('button').disabled = state.points < cost;
      el.querySelector('.note').textContent = `+${p.basePps.toFixed(2)} $/s each ‚Ä¢ Owned: ${p.level} ‚Ä¢ Cost: ${fmt(cost)}`;
    });
  }

  /* ---------- CLICK TARGET ---------- */
  function moveTarget(){
    const a = clickArea.getBoundingClientRect(), s = 56, p = 10;
    const x = p + Math.random() * Math.max(0, a.width  - s - p);
    const y = p + Math.random() * Math.max(0, a.height - s - p);
    targetBtn.style.left = x + 'px';
    targetBtn.style.top  = y + 'px';
  }
  const ro = new ResizeObserver(()=>moveTarget());
  ro.observe(clickArea);

  targetBtn.addEventListener('click', ()=>{
    state.points += state.basePpc * state.ppcMult * (state.prestige + 1);
    updateHUD();
    refreshAffordability();
    moveTarget();
  });

  /* ---------- QUIZ (minimal demo) ---------- */
  const QUIZ=[{q:"Lincoln's Ten Percent Plan aimed to...",c:["punish Confederates severely","require majority loyalty oaths","offer lenient readmission for states","delay readmission until 1900"],a:2}];
  let q=null;
  function ask(){
    q = QUIZ[Math.floor(Math.random()*QUIZ.length)];
    qText.textContent = q.q;
    qChoices.innerHTML='';
    q.c.forEach((t,i)=>{
      const b = document.createElement('button');
      b.className='choice';
      b.innerHTML = `<span class="pill">${String.fromCharCode(65+i)}</span> ${t}`;
      b.onclick = ()=>{
        if(i===q.a){ b.classList.add('correct'); } else { b.classList.add('wrong'); }
        $$('.choice').forEach(x=> x.disabled=true);
      };
      qChoices.appendChild(b);
    });
  }
  boostBtn.onclick = ()=>{ ask(); quizModal.showModal(); };
  closeQuiz.onclick = ()=> quizModal.close();
  reroll.onclick = ask;

  /* ---------- PASSIVE INCOME LOOP ---------- */
  let last = performance.now();
  function tick(){
    const now = performance.now();
    const dt = Math.min(1, (now - last)/1000);
    last = now;
    state.points += state.pps * dt * (state.prestige + 1);
    updateHUD();
    refreshAffordability();
    requestAnimationFrame(tick);
  }

  /* ---------- BOOT ---------- */
  initContent();
  recomputePPS();
  renderUpgrades();
  renderProducers();
  updateHUD();
  moveTarget();
  requestAnimationFrame(tick);
});
</script>
</body>
</html>
